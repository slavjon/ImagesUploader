{"version":3,"sources":["upload.js","app.js"],"names":["upload","selector","options","previewGrid","document","createElement","classList","add","input","querySelector","open","textContent","multi","setAttribute","accept","Array","isArray","join","insertAdjacentElement","triggerInput","click","changeHundler","event","target","files","length","from","innerHTML","forEach","file","type","match","reader","FileReader","onload","ev","src","result","insertAdjacentHTML","name","readAsDataURL","addEventListener"],"mappings":";;ACAA;;AAEA,oBAAO,OAAP,EAAgB;AACZY,EAAAA,KAAK,EAAE,IADK;AACC;AACbE,ADJG,ECIHA,MAAM,CDJMd,CCIJ,CAAC,IDJN,CAAgBC,CCIX,EAAS,KDJd,CCIK,CDJmC,CCIlB,OAAjB,EAA0B,OAA1B,CAFI,CAE+B;ADJA,MAAdC,OAAc,uEAAJ,EAAI;ACE/B,ADAZ,CCAJ,KDAUC,WAAW,GAAGC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAApB;AACAF,EAAAA,WAAW,CAACG,SAAZ,CAAsBC,GAAtB,CAA0B,eAA1B;AACA,MAAMC,KAAK,GAAGJ,QAAQ,CAACK,aAAT,CAAuBR,QAAvB,CAAd;AACA,MAAMS,IAAI,GAAGN,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAb;AACAK,EAAAA,IAAI,CAACJ,SAAL,CAAeC,GAAf,CAAmB,KAAnB;AACAG,EAAAA,IAAI,CAACC,WAAL,GAAmB,aAAnB,CAP2C,CAOT;;AAElC,MAAIT,OAAO,CAACU,KAAZ,EAAmB;AACfJ,IAAAA,KAAK,CAACK,YAAN,CAAmB,UAAnB,EAA+B,IAA/B;AACH;;AAED,MAAIX,OAAO,CAACY,MAAR,IAAkBC,KAAK,CAACC,OAAN,CAAcd,OAAO,CAACY,MAAtB,CAAtB,EAAqD;AACjDN,IAAAA,KAAK,CAACK,YAAN,CAAmB,QAAnB,EAA6BX,OAAO,CAACY,MAAR,CAAeG,IAAf,CAAoB,GAApB,CAA7B;AACH;;AAEDT,EAAAA,KAAK,CAACU,qBAAN,CAA4B,UAA5B,EAAwCf,WAAxC;AACAK,EAAAA,KAAK,CAACU,qBAAN,CAA4B,UAA5B,EAAwCR,IAAxC;;AAEA,MAAMS,YAAY,GAAG,SAAfA,YAAe;AAAA,WAAMX,KAAK,CAACY,KAAN,EAAN;AAAA,GAArB;;AAEA,MAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAAAC,KAAK,EAAI;AAC3B,QAAI,CAACA,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmBC,MAAxB,EAAgC;AAC5B;AACH;;AAED,QAAMD,KAAK,GAAGT,KAAK,CAACW,IAAN,CAAWJ,KAAK,CAACC,MAAN,CAAaC,KAAxB,CAAd;AAEArB,IAAAA,WAAW,CAACwB,SAAZ,GAAwB,EAAxB;AACAH,IAAAA,KAAK,CAACI,OAAN,CAAc,UAAAC,IAAI,EAAI;AAClB,UAAI,CAACA,IAAI,CAACC,IAAL,CAAUC,KAAV,CAAgB,OAAhB,CAAL,EAA+B;AAC3B;AACH;;AAED,UAAMC,MAAM,GAAG,IAAIC,UAAJ,EAAf;;AAEAD,MAAAA,MAAM,CAACE,MAAP,GAAgB,UAAAC,EAAE,EAAI;AAClB,YAAMC,GAAG,GAAGD,EAAE,CAACZ,MAAH,CAAUc,MAAtB;AACAlC,QAAAA,WAAW,CAACmC,kBAAZ,CAA+B,YAA/B,6EAEoBF,GAFpB,sBAEiCP,IAAI,CAACU,IAFtC;AAKH,OAPD;;AAQAP,MAAAA,MAAM,CAACQ,aAAP,CAAqBX,IAArB;AACH,KAhBD;AAiBH,GAzBD;;AA2BAnB,EAAAA,IAAI,CAAC+B,gBAAL,CAAsB,OAAtB,EAA+BtB,YAA/B;AACAX,EAAAA,KAAK,CAACiC,gBAAN,CAAuB,QAAvB,EAAiCpB,aAAjC;AACH","file":"app.c328ef1a.js","sourceRoot":"../src","sourcesContent":["export function upload(selector, options = {}) {\r\n\r\n    const previewGrid = document.createElement('div');\r\n    previewGrid.classList.add('preview__grid');\r\n    const input = document.querySelector(selector);\r\n    const open = document.createElement('button');\r\n    open.classList.add('btn');\r\n    open.textContent = 'Open images'; //Text in button\r\n\r\n    if (options.multi) {\r\n        input.setAttribute('multiple', true);\r\n    }\r\n\r\n    if (options.accept && Array.isArray(options.accept)) {\r\n        input.setAttribute('accept', options.accept.join(','))\r\n    }\r\n\r\n    input.insertAdjacentElement('afterend', previewGrid);\r\n    input.insertAdjacentElement('afterend', open);\r\n\r\n    const triggerInput = () => input.click();\r\n\r\n    const changeHundler = event => {\r\n        if (!event.target.files.length) {\r\n            return;\r\n        }\r\n\r\n        const files = Array.from(event.target.files);\r\n\r\n        previewGrid.innerHTML = '';\r\n        files.forEach(file => {\r\n            if (!file.type.match('image')) {\r\n                return;\r\n            }\r\n\r\n            const reader = new FileReader();\r\n\r\n            reader.onload = ev => {\r\n                const src = ev.target.result;\r\n                previewGrid.insertAdjacentHTML('afterbegin',\r\n                    `<div class=\"preview__img\">\r\n                        <img src=\"${src}\" alt=\"${file.name}\">\r\n                    </div>\r\n                    `);\r\n            }\r\n            reader.readAsDataURL(file);\r\n        });\r\n    }\r\n\r\n    open.addEventListener('click', triggerInput);\r\n    input.addEventListener('change', changeHundler);\r\n}","import { upload } from './upload.js';\r\n\r\nupload('#file', {\r\n    multi: true, // param to add many images\r\n    accept: ['.png', '.jpg', '.jpeg', '.webp'] //allow to images format\r\n});"]}